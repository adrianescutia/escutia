"use strict";(self.webpackChunkescutia_website=self.webpackChunkescutia_website||[]).push([[589],{5107:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>s,metadata:()=>r,toc:()=>h});var r=o(7270),i=o(4848),n=o(8453);const s={title:"How to remove a file from Git commit history",description:"Learn how to remove a file from Git commit history when it isn't pushed to a remote repository."},a="How to remove a file from Git commit history (when it isn't pushed to a remote repository)",c={authorsImageUrls:[]},h=[];function l(e){const t={a:"a",code:"code",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["Sometimes, you may accidentally commit sensitive information like passwords or API keys to your Git repository. If the sensitive information is in a file like ",(0,i.jsx)(t.code,{children:".env"}),", you should remove it from the commit history to prevent it from being exposed. Oh, my... I have been there before. \ud83d\ude30"]}),"\n",(0,i.jsxs)(t.p,{children:["If the ",(0,i.jsx)(t.code,{children:".env"})," file is only in your local Git repository and has not been pushed to a remote repository yet, you are kind of lucky. In this case, you can remove it from the history using an interactive rebase or by resetting the commit that added the file."]}),"\n",(0,i.jsx)(t.p,{children:"Here is a method to achieve this:"}),"\n",(0,i.jsx)(t.p,{children:"Interactive Rebase"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Start Interactive Rebase:"})}),"\n",(0,i.jsxs)(t.p,{children:["Start an interactive rebase for the last few commits (adjust the number N to include the commit that added the ",(0,i.jsx)(t.code,{children:".env"})," file)."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.code,{children:"git rebase -i HEAD~N"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Edit the Commit:"})}),"\n",(0,i.jsxs)(t.p,{children:["In the interactive rebase editor, change the command from ",(0,i.jsx)(t.code,{children:"pick"})," to ",(0,i.jsx)(t.strong,{children:(0,i.jsx)(t.code,{children:"edit"})})," for the commit that added the ",(0,i.jsx)(t.code,{children:".env"})," file."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Remove the File:"})}),"\n",(0,i.jsxs)(t.p,{children:["Remove the ",(0,i.jsx)(t.code,{children:".env"})," file from the commit."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"git rm --cached .env\ngit commit --amend --no-edit\n"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Continue Rebase:"})}),"\n",(0,i.jsx)(t.p,{children:"Continue the rebase process."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.code,{children:"git rebase --continue"})}),"\n",(0,i.jsxs)(t.p,{children:["Ooooh my gosh! You have successfully removed the ",(0,i.jsx)(t.code,{children:".env"})," file from the commit history. \ud83d\ude30"]}),"\n",(0,i.jsxs)(t.p,{children:["If you pushed the ",(0,i.jsx)(t.code,{children:".env"})," file to a remote repository, you should consider rotating the credentials and changing the passwords or API keys. It's better to be safe than sorry. To remove the file from the commit history in a remote repository, you will need to force push the changes. However, force pushing changes to a remote repository is not recommended if you are working in a team. It can cause conflicts and make it difficult for others to work on the project. There are tools that can help you remove sensitive information from the commit history without force pushing changes. Here are a few tools you can use:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.a,{href:"https://rtyley.github.io/bfg-repo-cleaner/",children:"BFG Repo-Cleaner"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.a,{href:"https://github.com/newren/git-filter-repo",children:"git-filter-repo"}),"."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.a,{href:"https://git-scm.com/docs/git-filter-branch",children:"git-filter-branch"}),"."]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"I hope this helps a little and saves you from a headache. \ud83d\ude05"})]})}function d(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,t,o)=>{o.d(t,{R:()=>s,x:()=>a});var r=o(6540);const i={},n=r.createContext(i);function s(e){const t=r.useContext(n);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(n.Provider,{value:t},e.children)}},7270:e=>{e.exports=JSON.parse('{"permalink":"/adrian/remove-a-file-from-git-history","source":"@site/adrian/remove-a-file-from-git-history.md","title":"How to remove a file from Git commit history","description":"Learn how to remove a file from Git commit history when it isn\'t pushed to a remote repository.","date":"2025-02-10T12:11:54.000Z","tags":[],"readingTime":1.67,"hasTruncateMarker":true,"authors":[],"frontMatter":{"title":"How to remove a file from Git commit history","description":"Learn how to remove a file from Git commit history when it isn\'t pushed to a remote repository."},"unlisted":false,"nextItem":{"title":"Java Enters the AI Arena with MCP and Quarkus","permalink":"/adrian/java-enters-the-ai-arena-with-mcp"}}')}}]);